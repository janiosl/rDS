separate(key, #Coluna com valores juntos
c("new", "type", "sexage"), #Valores separados
sep = "_") #Separador
who3
#Separar sexo e idade
who4 <- who3 %>%
separate(sexage,
c("sex", "age"),
sep = 1)
who4
#Eliminar colunas desnecessárias
who5 <- who4 %>%
select(-new, -iso2, -iso3)
who5
##Alternativa simplificada (completa) de tratamento dos dados
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = string::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
##Alternativa simplificada (completa) de tratamento dos dados
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
source("D:/GitHub/rDS/r4ds/rds_cap09_estrutura_tidyr.R", echo=TRUE)
source("D:/GitHub/rDS/r4ds/rds_cap09_estudoCaso.R", echo=TRUE)
who5 %>%
group_by(country)
who5 %>%
group_by(country) %>%
summarize()
who5 %>%
group_by(country) %>%
summarize(cases)
?summarize
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases))
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases)) %>%
ggplot(data = aes(x = cases)) +
geom_bar()
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = cases)) +
geom_bar()
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = cases, y = country)) +
geom_bar()
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = cases)) +
geom_bar(stat = sum)
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = cases)) +
geom_bar() +
stat_sum()
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = cases)) +
geom_bar()
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = country)) +
geom_bar()
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = country)) +
geom_bar() +
stat_sum()
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases))
#Criar dados de exemplo
demo <- tribble(
~a, ~b,
"bar_1", 20,
"bar_2", 30,
"bar_3", 40
)
summary(demo)
#Criando o mesmo gráfico com a transf. estatística diferente
ggplot(data = demo) +
geom_bar(mapping = aes(x=a, y=b),
stat = "identity")
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = country, y = cases)) +
geomp_bar()
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = country, y = cases)) +
geom_bar()
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases))
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity")
who5 %>%
group_by(country) %>%
summarize(cases = sum(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
View(who5)
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
View(who5)
#Análise por tipo de caso
who5 %>%
group_by(type) %>%
summarize(cases = mean(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = type, y = cases),
stat = "identity")
source("D:/GitHub/rDS/r4ds/rds_cap09_estudoCaso.R", echo=TRUE)
ggplot() +
geom_bar(mapping = aes(x = type, y = cases),
stat = "identity")
#Análise por país
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
filter(cases > 100) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
#Análise por país
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
filter(cases > 1000) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
library(tidyverse)
#Dataset
who
View(who)
who1 <- who %>%
gather(
new_sp_m014:newrel_f65,
key = "key",
value = "cases",
na.rm = TRUE
)
who1
who1 %>%
count(key)
#Corrigir newrel para new_rel em key - facilitará a separação
who2 <- who1 %>%
mutate(key = stringr::str_replace(key, "newrel", "new_rel"))
who2
#Primeira separação das colunas
who3 <- who2 %>%
separate(key, #Coluna com valores juntos
c("new", "type", "sexage"), #Valores separados
sep = "_") #Separador
who3
#Separar sexo e idade
who4 <- who3 %>%
separate(sexage,
c("sex", "age"),
sep = 1)
who4
#Eliminar colunas desnecessárias
who5 <- who4 %>%
select(-new, -iso2, -iso3) #Eliminar colunas com - em select
who5
##Alternativa simplificada (completa) de tratamento dos dados
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
##Alternativa simplificada (completa) de tratamento dos dados
who %>%
gather(code, value, new_sp_m014:newrel_f65, na.rm = TRUE) %>%
mutate(
code = stringr::str_replace(code, "newrel", "new_rel")
) %>%
separate(code, c("new", "var", "sexage")) %>%
select(-new, -iso2, -iso3) %>%
separate(sexage, c("sex", "age"), sep = 1)
#Análise por país
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
#Análise por país com mais de 1000 casos
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
filter(cases > 1000) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
#Análise por país com mais de 1000 casos
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
arrange() %>%
filter(cases > 1000) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
#Análise por país com mais de 1000 casos
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
filter(cases > 1000) %>%
arrange(desc(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
#Análise por país com mais de 1000 casos
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
filter(cases > 1000) %>%
#arrange(desc(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
#Análise por tipo de caso
who5 %>%
group_by(type) %>%
summarize(cases = mean(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = type, y = cases),
stat = "identity")
#Análise por país
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
#Análise por país com mais de 1000 casos
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
filter(cases > 1000) %>%
#arrange(desc(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
#Análise por tipo de caso do país com mais casos
who5 %>%
filter(country = "India") %>%
group_by(type) %>%
summarize(cases = mean(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = type, y = cases),
stat = "identity")
#Análise por tipo de caso do país com mais casos
who5 %>%
filter(country == "India") %>%
group_by(type) %>%
summarize(cases = mean(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = type, y = cases),
stat = "identity")
#Análise por país com mais de 1000 casos
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
arrange(desc(cases)) %>%
filter(cases > 1000) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
#Análise por país
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
arrange(desc(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
arrange(desc(cases))
#Análise por país
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
arrange(desc(cases))
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
arrange(desc(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
#Análise por país com mais de 1000 casos
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
filter(cases > 1000) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip()
#Análise por tipo de caso do país com mais casos
who5 %>%
filter(country == "India") %>%
group_by(type) %>%
summarize(cases = mean(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = type, y = cases),
stat = "identity")
who5 %>%
filter(country in c("Indica", "China", "South Africa")) %>%
#Análise por tipo de caso dos 3 paises com mais casos
who5 %>%
filter(country == "Indica" | country == "China" country == "South Africa")) %>%
who5 %>%
filter(country == "India" | country == "China" | country == "South Africa") %>%
group_by(type) %>%
summarize(cases = mean(cases))
#Análise por tipo de caso dos 3 paises com mais casos
who5 %>%
filter(country == "India" | country == "China" | country == "South Africa") %>%
group_by(type) %>%
summarize(cases = mean(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = type, y = cases),
stat = "identity")
source("D:/GitHub/rDS/r4ds/rds_cap09_estudoCaso.R", echo=TRUE)
#Análise da evolução ao longo do tempo
who5 %>%
filter(country == "Indica")
#Análise da evolução ao longo do tempo
who5 %>%
filter(country == "India")
#Análise da evolução ao longo do tempo
who5 %>%
filter(country == "India") %>%
select(country, year, cases)
#Análise da evolução ao longo do tempo
who5 %>%
filter(country == "India") %>%
select(country, year, cases) %>%
group_by(year)
#Análise da evolução ao longo do tempo
who5 %>%
filter(country == "India") %>%
select(country, year, cases) %>%
group_by(year) %>%
summarize(cases = sum(cases))
#Análise da evolução ao longo do tempo
who5 %>%
filter(country == "India") %>%
select(country, year, cases) %>%
group_by(year) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = year, y = cases)) +
geomp_point()
#Análise da evolução ao longo do tempo
who5 %>%
filter(country == "India") %>%
select(country, year, cases) %>%
group_by(year) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = year, y = cases)) +
geom_point()
#Análise da evolução ao longo do tempo
who5 %>%
filter(country == "India") %>%
select(country, year, cases) %>%
group_by(year) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = year, y = cases)) +
geom_point() +
geom_smooth()
#Análise da evolução ao longo do tempo na Índia
who5 %>%
filter(country == "India") %>%
select(country, year, cases) %>%
group_by(year) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = year, y = cases)) +
geom_point(position = "jitter") +
geom_smooth()
source("D:/GitHub/rDS/r4ds/rds_cap09_estudoCaso.R", echo=TRUE)
source("D:/GitHub/rDS/r4ds/rds_cap09_estudoCaso.R", echo=TRUE)
?ggplot
#Análise da evolução ao longo do tempo na Índia
who5 %>%
filter(country == "India") %>%
select(country, year, cases) %>%
group_by(year) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = year, y = cases)) +
geom_point(position = "jitter") +
geom_smooth() +
ggtitle("Análise da evolução ao longo do tempo na Índia") +
xlab("Anos") + ylab("Casos")
#Análise por país com mais de 1000 casos
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
filter(cases > 1000) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip() +
ggtitle("Análise por país com mais de 1000 casos") +
xlab("Tipos") + ylab("Casos")
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
arrange(desc(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip() +
ggtitle("Análise por país com") +
xlab("Países") + ylab("Casos")
#Análise por país com mais de 1000 casos
who5 %>%
group_by(country) %>%
summarize(cases = mean(cases)) %>%
filter(cases > 1000) %>%
ggplot() +
geom_bar(mapping = aes(x = country, y = cases),
stat = "identity") +
coord_flip() +
ggtitle("Análise por país com mais de 1000 casos") +
xlab("Países") + ylab("Casos")
#Análise por tipo de caso do país com mais casos
who5 %>%
filter(country == "India") %>%
group_by(type) %>%
summarize(cases = mean(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = type, y = cases),
stat = "identity") +
ggtitle("Análise por tipo de caso do país com mais casos: Índia") +
xlab("Tipos") + ylab("Casos")
#Análise por tipo de caso dos 3 paises com mais casos
who5 %>%
filter(country == "India" | country == "China" | country == "South Africa") %>%
group_by(type) %>%
summarize(cases = mean(cases)) %>%
ggplot() +
geom_bar(mapping = aes(x = type, y = cases),
stat = "identity") +
ggtitle("Análise por tipo de caso dos 3 paises com mais casos") +
xlab("Tipos") + ylab("Casos")
#Análise da evolução ao longo do tempo na Índia
who5 %>%
filter(country == "India") %>%
select(country, year, cases) %>%
group_by(year) %>%
summarize(cases = sum(cases)) %>%
ggplot(mapping = aes(x = year, y = cases)) +
geom_point(position = "jitter") +
geom_smooth() +
ggtitle("Análise da evolução ao longo do tempo na Índia") +
xlab("Anos") + ylab("Casos")
