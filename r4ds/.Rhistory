library(tidyverse)
library(readr)
install.packages("tidyverse")
library(tidyverse)
library(readr)
source("D:/GitHub/rDS/r4ds/rds_cap08_data_readr.R", echo=TRUE)
print("Teste")
source("D:/GitHub/rDS/r4ds/rds_cap08_data_readr.R", echo=TRUE)
source("D:/GitHub/rDS/r4ds/rds_cap08_data_readr.R", echo=TRUE)
source("D:/GitHub/rDS/r4ds/rds_cap08_data_readr.R", echo=TRUE)
source("D:/GitHub/rDS/r4ds/rds_cap08_data_readr.R", echo=TRUE)
source("D:/GitHub/rDS/r4ds/rds_cap08_data_readr.R", echo=TRUE)
parse_date("01/02/15", "%d/%m/%y")
parse_date("01/02/15", "%y/%m/%d")
date_names_langs()
parse_date("1 janeiro 2015", "%d%B%Y",
locale = locale("pt"))
parse_date("1 janeiro 2015", "%d %B %Y",
locale = locale("pt"))
#Exemplo de parse
challenge <- read_csv(readr_example("challenge.csv"))
library(tidyverse)
library(readr)
#Exemplo de parse
challenge <- read_csv(readr_example("challenge.csv"))
View(challenge)
problems(challenge)
##Não ocorreu problemas na interpretação
##das colunas (provavelmente devido alguma atualização do pacote)
tail(challenge)
#Se ocorresse o problema poderia ser corrigido especificando as colunas
challenge <- read_csv(readr_example("challenge.csv"),
col_types = cols(
x = col_double(),
y = col_date()
))
##Não ocorreu problemas na interpretação
##das colunas (provavelmente devido alguma atualização do pacote)
tail(challenge)
#Ampliar a análise padrão para readr "advinhar" as colunas
challenge2 <- read_csv(readr_example("challenge"),
guess_max = 1001)
#Ampliar a análise padrão para readr "advinhar" as colunas
challenge2 <- read_csv(readr_example("challenge.csv"),
guess_max = 1001)
#Armazenar resultados de maneira simples (sem preservar tipos de dados)
write_csv(challenge,
"data/challenge.csv")
read_csv("data/challenge.csv")
tail(read_csv("data/challenge.csv"))
#Armazenar resultados de maneira aprimorada (preserva tipos de dados)
write_rds(challenge,
"data/challenge.rds")
read_rds("data/challenge.rds")
table4a <- tribble(
~country, ~1999, ~2000,
##====/====/====
"Afeganistão", 745, 2666,
"Brasil", 37737, 80488
)
table4a <- tribble(
~country, ~1999, ~2000,
##====/====/====
"Afeganistão", 745, 2666,
"Brasil", 37737, 80488
)
table4a <- tribble(
~country, ~"1999", ~"2000",
##====/====/====
"Afeganistão", 745, 2666,
"Brasil", 37737, 80488
)
View(table4a)
table4a
table4a <- tribble(
~country, ~"1999", ~"2000",
##====/====/====
"Afeganistão", 745, 2666,
"Brasil", 37737, 80488,
"China", 212258, 213766
)
table4a
?tribble
table4a <- tribble(
~country, ~"1999", ~"2000",
##====/====/====
"Afeganistão", 745, 2666,
"Brasil", 37737, 80488,
"China", 212258, 213766
) %>%
across("1999", as.integer)
tribble(
~a, ~b, ~c,
1, "2000-01-01", "1.5"
) %>%
dplyr::mutate(
dplyr::across(a, as.integer),
dplyr::across(b, as.Date)
)
tribble(
~a, ~b, ~c,
1, "2000-01-01", "1.5"
) %>%
dplyr::mutate(
dplyr::across(a, as.integer),
dplyr::across(b, as.Date)
)
table4a <- tribble(
~country, ~"1999", ~"2000",
##====/====/====
"Afeganistão", 745, 2666,
"Brasil", 37737, 80488,
"China", 212258, 213766
) %>% mutate(
across("1999", as.integer))
table4a
table4a <- tribble(
~country, ~"1999", ~"2000",
##====/====/====
"Afeganistão", 745, 2666,
"Brasil", 37737, 80488,
"China", 212258, 213766
) %>% mutate(
across("1999", as.integer),
across("2000", as.integer))
table4a
library(tidyverse)
table4a <- tribble(
~country, ~"1999", ~"2000",
##====/====/====
"Afeganistão", 745, 2666,
"Brasil", 37737, 80488,
"China", 212258, 213766
) %>% mutate(
across("1999", as.integer),
across("2000", as.integer))
table4a
#Ajustando tabela para torná-la "tidy"
table4a %>%
gather('1999', '2000',    #Colunas originais
key = "year",     #Nome da coluna que receberá as colunas antigas
value = "cases")  #Nome da coluna que receberá os valores
table4b <- tribble(
~country, ~"1999", ~"2000",
##====/====/====
"Afeganistão", 19987071, 20595360,
"Brasil", 172006362, 174504898,
"China", 1272915272, 1280428583
) %>% mutate(
across("1999", as.integer),
across("2000", as.integer))
table4b
table4b %>%
gather('1999', '2000',
key = "year",
value = "population")
#Ajustando tabelas para torná-las "tidy"
td4a <- table4a %>%
gather('1999', '2000',    #Colunas originais
key = "year",     #Nome da coluna que receberá as colunas antigas
value = "cases")  #Nome da coluna que receberá os valores
td4b <- table4b %>%
gather('1999', '2000',
key = "year",
value = "population")
left_join(td4a, td4b)
td4_j <- left_join(td4a, td4b)
td4_j
##===================================
##Espalhar com spred
##===================================
table2 <- tribble(
~country, ~year, ~type, ~count,
#====/====/====/====
"Afeganistão", 1999, "cases", 745,
"Afeganistão", 1999, "population", 19987071,
"Afeganistão", 2000, "cases", 2666,
"Afeganistão", 2000, "population", 20595360,
"Brasil", 1999, "cases", 37737,
"Brasil", 1999, "population", 172006362,
"Brasil", 2000, "cases", 80488,
"Brasil", 2000, "population", 174504898,
"China", 1999, "cases", 212258,
"China", 1999, "population", 1272915272,
"China", 2000, "cases", 213766,
"China", 2000, "population", 1280428583)
table2
##===================================
##Espalhar com spred
##===================================
table2 <- tribble(
~country, ~year, ~type, ~count,
#====/====/====/====
"Afeganistão", 1999, "cases", 745,
"Afeganistão", 1999, "population", 19987071,
"Afeganistão", 2000, "cases", 2666,
"Afeganistão", 2000, "population", 20595360,
"Brasil", 1999, "cases", 37737,
"Brasil", 1999, "population", 172006362,
"Brasil", 2000, "cases", 80488,
"Brasil", 2000, "population", 174504898,
"China", 1999, "cases", 212258,
"China", 1999, "population", 1272915272,
"China", 2000, "cases", 213766,
"China", 2000, "population", 1280428583) %>%
mutate(across("year", as.integer),
across("count", as.integer))
table2
View(table2)
#Distribuindo os valores e colunas de maneira tidy
spread(table2,
key = type,
values = count)
#Distribuindo os valores e colunas de maneira tidy
spread(table2,
key = type,
value = count)
td4_j
##Exercícios
preg <- trible(
~pregnant, ~male, female,
#----/----/---
"yes", NA, 10,
"no", 20, 12
)
##Exercícios
preg <- tribble(
~pregnant, ~male, female,
#----/----/---
"yes", NA, 10,
"no", 20, 12
)
##Exercícios
preg <- tribble(
~pregnant, ~male, ~female,
#----/----/---
"yes", NA, 10,
"no", 20, 12
)
preg
spread(preg,
key = "gender",
value = "count")
preg %>% gather(male, female,
key = "gender",
value = "count")
##Exercícios
preg <- tribble(
~pregnant, ~male, ~female,
#----/----/---
"yes", NA, 10,
"no", 20, 12
) %>%
mutate(across(male, as.integer),
across(female, as.integer))
preg
preg %>% gather(male, female,
key = "gender",
value = "count")
##Exercícios
#2 - O código falha porque 1999 e 2000 estão digitados como inteiros
table4a %>%
gather(1999, 2000, key = "year", value = "cases")
